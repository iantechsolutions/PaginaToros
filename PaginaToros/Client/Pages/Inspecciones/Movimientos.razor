@using PaginaToros.Shared.Models
@using System.Collections.Generic

@if (Loading)
{
    <div class="p-2">
        <RadzenSkeleton Shape="SkeletonShape.Rectangle" Height="280px" />
    </div>
}
else
{
    @if (!EsSocio)
    {
        <button class="font-bold px-4 py-3 rounded-2xl bg-gray-200 hover:bg-gray-300 hover:border-transparent transition ease-in duration-100 transform hover:-translate-y-1 active:translate-y-0" style="position:relative;left:13px;" @onclick="() => AgregarMov.InvokeAsync(0)">Agregar Movimiento</button>
    }
    <br />
    <br />
    <div class="container">
        <div class="row">
            <div class="col">
                <table class="table table-bordered text-center">
                    <thead>
                        <tr>
                            <th rowspan="2" style="background-color: #FFFFFF;"></th>
                            <th rowspan="2" style="background-color: #999999;">TIPO DE MOVIMIENTO</th>
                            <th rowspan="2" style="background-color: #666666;">MOTIVO</th>
                            <th colspan="3" style="background-color: #999999;">PURO REGISTRADO</th>
                            <th colspan="3" style="background-color: #999999;">VIP</th>
                            <th />
                        </tr>
                        <tr style="background-color: #FFFFFF;">
                            <th style="background-color: #FFFFFF;">VACAS</th>
                            <th style="background-color: #FFFFFF;">VAQ c/ Servicio</th>
                            <th style="background-color: #FFFFFF;">VAQ s/Servicio</th>
                            <th style="background-color: #FFFFFF;">VACAS</th>
                            <th style="background-color: #FFFFFF;">VAQ c/Servicio o preñadas</th>
                            <th style="background-color: #FFFFFF;">VAQ s/Servicio</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background-color: #33CCFF;">
                            <td style="background-color: #999999;"><strong>EXISTENCIA ANTERIOR</strong></td>
                            <td style="background-color: #666666;">-</td>
                            <td style="background-color: #666666;">-</td>
                            <td>@EstadoAnterior.Ea1</td>
                            <td>@EstadoAnterior.Ea2</td>
                            <td>@EstadoAnterior.Ea3</td>
                            <td>@EstadoAnterior.Ea4</td>
                            <td>@EstadoAnterior.Ea5</td>
                            <td>@EstadoAnterior.Ea6</td>
                        </tr>
                        @foreach (var mov in Mtos)
                        {
                            <tr>
                                <td></td>
                                <td>@(Traductor.ContainsKey(mov.Tipmov) ? Traductor[mov.Tipmov] : mov.Tipmov)</td>
                                <td>@(Traductor.ContainsKey(mov.Ctomov) ? Traductor[mov.Ctomov] : mov.Ctomov)</td>
                                <td>@mov.Rdvac</td>
                                <td>@mov.Rdvaqcs</td>
                                <td>@mov.Rdvaqss</td>
                                <td>@mov.Rpvac</td>
                                <td>@mov.Rpvaqcs</td>
                                <td>@mov.Rpvaqss</td>
                                @if (EsSocio)
                                {
                                    <td></td>
                                }
                                else
                                {
                                    <td>
                                        <button class="btn" title="Editar info" @onclick="() => EditMov.InvokeAsync(mov.Id)"><FeatherEdit Size="16" Color="green" /></button>
                                        <button class="btn" title="Borrar" @onclick="() => DeleteMov.InvokeAsync(mov.Id)"><FeatherDelete Size="16" Color="red" /></button>
                                    </td>
                                }
                            </tr>
                        }
                        <tr style="background-color: #FFFF66;">
                            <td style="background-color: #999999;"><strong>Total Entradas</strong></td>
                            <td style="background-color: #666666;">-</td>
                            <td style="background-color: #666666;">-</td>
                            <td>@EntradasFinal.Ea1</td>
                            <td>@EntradasFinal.Ea2</td>
                            <td>@EntradasFinal.Ea3</td>
                            <td>@EntradasFinal.Ea4</td>
                            <td>@EntradasFinal.Ea5</td>
                            <td>@EntradasFinal.Ea6</td>
                            <td />
                        </tr>
                        <tr style="background-color: #FFCC99;">
                            <td style="background-color: #999999;"><strong>Total Salidas</strong></td>
                            <td style="background-color: #666666;">-</td>
                            <td style="background-color: #666666;">-</td>
                            <td>@SalidasFinal.Ea1</td>
                            <td>@SalidasFinal.Ea2</td>
                            <td>@SalidasFinal.Ea3</td>
                            <td>@SalidasFinal.Ea4</td>
                            <td>@SalidasFinal.Ea5</td>
                            <td>@SalidasFinal.Ea6</td>
                            <td />
                        </tr>
                        <tr style="background-color: #FF9966;">
                            <td style="background-color: #999999;"><strong>EXISTENCIA ACTUAL</strong></td>
                            <td style="background-color: #666666;">-</td>
                            <td style="background-color: #666666;">-</td>
                            <td>@EstadoFinal.Ea1</td>
                            <td>@EstadoFinal.Ea2</td>
                            <td>@EstadoFinal.Ea3</td>
                            <td>@EstadoFinal.Ea4</td>
                            <td>@EstadoFinal.Ea5</td>
                            <td>@EstadoFinal.Ea6</td>
                            <td />
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
}

@code {
    [Parameter] public bool Loading { get; set; }
    [Parameter] public bool EsSocio { get; set; }
    [Parameter] public List<Resin3DTO> Mtos { get; set; } = new();
    [Parameter] public Resin2DTO EstadoAnterior { get; set; } = new();
    [Parameter] public Resin2DTO EntradasFinal { get; set; } = new();
    [Parameter] public Resin2DTO SalidasFinal { get; set; } = new();
    [Parameter] public Resin2DTO EstadoFinal { get; set; } = new();
    [Parameter] public Dictionary<string,string> Traductor { get; set; } = new();
    [Parameter] public EventCallback<int> AgregarMov { get; set; }
    [Parameter] public EventCallback<int> EditMov { get; set; }
    [Parameter] public EventCallback<int> DeleteMov { get; set; }
}
